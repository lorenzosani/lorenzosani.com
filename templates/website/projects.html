{% load static %}
<div class="nav-container sticky-top" id="nav-standard">
    <nav id="nav-projects">
        <div class="nav-mobile">
            <a class="nav-toggle" id="projects-toggle" onclick="menuToggle('projects')" href="#!"><span class="white-toggle"></span></a>
        </div>
        <ul class="nav-list" id="projects-list">
            <li>
                <a href="#main" onclick="menuToggle('projects'), animateSection('projects', 'main')"
                class="text-hover text-hover-linethrough-goes-right white">Home</a>
            </li>
            <li>
                <a href="#about" onclick="menuToggle('projects'), animateSection('projects', 'about')" class="text-hover text-hover-linethrough-goes-right white">About</a>
            </li>
            <li>
                <a href="#!" class="active text-hover text-hover-linethrough-goes-right orange">Projects</a>
            </li>
            <li>
                <a href="#contact" onclick="menuToggle('projects'), animateSection('projects', 'contact')" class="text-hover text-hover-linethrough-goes-right white">Contact</a>
            </li>
          <li>
            <a href="https://www.linkedin.com/in/lorenzo-sani/" target="_blank" class="white text-hover text-hover-linethrough-goes-right"><img src="{% static 'linkedin.png' %}" height="20px" width="20px"></a>&nbsp;
            <a href="https://www.github.com/lorenzosani/" target="_blank" class="white text-hover text-hover-linethrough-goes-right"><img src="{% static 'github.png' %}" height="20px" width="20px"></a>
          </li>
        </ul>
    </nav>
</div>
<h1 class="title section-title orange">Projects</h1>

<div class="white padding-sides padding-top">
    <div class="text mb-4 p-hide" style="font-size: 4.5vw;">
        Filter projects by category
    </div>
    <button class="bubble" onclick="select('web-dev')" id="web-dev">WebDev</button>
    <button class="bubble" onclick="select('mobile-dev')" id="mobile-dev">MobileDev</button>
    <button class="bubble" onclick="select('game-dev')" id="game-dev">GameDev</button>
    <button class="bubble" onclick="select('neuro-tech')" id="neuro-tech">NeuroTech</button>
    <button class="bubble" onclick="select('machine-learning')" id="machine-learning">Machine Learning</button>
    <button class="bubble" onclick="select('ui-ux-design')" id="ui-ux-design">UI/UX Design</button>
    <button class="bubble" onclick="select('graphic-design')" id="graphic-design">Graphic Design</button>
    <button class="learn-more p-hide">
        <a href="#!" onclick="showProjects()">
            <span class="circle">
                <span class="icon arrow"></span>
            </span>
            <span class="button-text orange">See Projects</span>
        </a>
    </button>

<div id="projectsCarousel" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
	<div class="carousel-item active">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
		<div class="col-4">
            <a href="{{project.link}}" target="_blank">
			<div class="card project-card">
				<div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
				<div class="card-body">
					<p class="blue card-title">{{ project.title }}</p>
					<p class="blue card-text">{{ project.description }}</p>
				</div>
			</div>
            </a>
		</div>
		{% endfor %}
		</div>
	</div>
	{% if projects|length > 3 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
	{% if projects|length > 6 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
	{% if projects|length > 9 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
	{% if projects|length > 12 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
	{% if projects|length > 15 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
	{% if projects|length > 18 %}
	<div class="carousel-item">
		<div class="cards row">
		{% for project in projects|slice:"0:3" %}
            <div class="col-4">
                <a href="{{project.link}}" target="_blank">
                <div class="card project-card">
                    <div class="card-image" style="background: #e6e6e6 no-repeat center center; background-size:cover; background-image: url({{ project.image.url }})"></div>
                    <div class="card-body">
                        <p class="blue card-title">{{ project.title }}</p>
                        <p class="blue card-text">{{ project.description }}</p>
                    </div>
                </div>
                </a>
            </div>
		{% endfor %}
		</div>
	</div>
	{% endif %}
</div>
</div>
{% if projects|length > 4 %}
<div id="project-scroll">
    <a class="carousel-control-next" href="#!"><span id="project-scroll-next"></span></a>
</div>
<div id="project-scroll">
    <a class="carousel-control-prev" href="#!"><span id="project-scroll-prev"></span></a>
</div>

<button class="learn-more back-to-selection">
    <a href="#!" onclick="showSelection()">
        <span class="circle">
            <span class="icon arrow"></span>
        </span>
        <span class="button-text orange" style="">See filters</span>
    </a>
</button>
{% endif %}

<script>
    $(document).ready(() => {
        let carousel = $('#projectsCarousel');
        let selected = {
            "web-dev" : false,
            "mobile-dev" : false,
            "game-dev" : false,
            "neuro-tech" : false,
            "machine-learning" : false,
            "ui-ux-design" : false,
            "graphic-design" : false
        }

        carousel.carousel('pause');

        select = (id) => {
            selected[id] = !selected[id]
            selected[id] ? document.getElementById(id).classList.add("bubble-active") : document.getElementById(id).classList.remove("bubble-active");
            filterProjects(selected);
        }

        filterProjects = (filter) => {
            $.ajax({
                url: "/projects/filter",
                data: filter,
                dataType: 'text',
                contentType: 'application/json; charset=utf-8',
                success: response => {
                    $("#projectsCarousel").html(response)
                },
                error: response => {
                    console.log(response);
                }
            });
        }

        showProjects = () => {
            $(".padding-sides").css("margin-left", "400px");
            $(".padding-sides").css("margin-right", "-400px");
            $(".padding-sides").css("opacity", "0");
            setTimeout(() => {
                $(".p-hide, .bubble").css("display", "none");
                $("#projectsCarousel").css("display", "flex");
                $("#project-scroll a").css("display", "inline-block");
                $(".back-to-selection").css("display", "block");
                $(".padding-sides").css("margin-left", "0px");
                $(".padding-sides").css("margin-right", "0px");
                $(".padding-sides").css("opacity", "1");
            }, 600);
        }

        showSelection = () => {
            $(".padding-sides").css("margin-left", "400px");
            $(".padding-sides").css("margin-right", "-400px");
            $(".padding-sides").css("opacity", "0");
            setTimeout(() => {
                $("#projectsCarousel, #project-scroll a, .back-to-selection").css("display", "none");
                $(".p-hide").css("display", "block");
                $(".bubble").css("display", "inline-block");
                $(".padding-sides").css("margin-left", "0px");
                $(".padding-sides").css("margin-right", "0px");
                $(".padding-sides").css("opacity", "1");
            }, 600);
        }

        $(".carousel-control-prev").click((event) => {
            event.preventDefault();
            carousel.carousel('prev');
        });

        $(".carousel-control-next").click((event) => {
            event.preventDefault();
            carousel.carousel('next');
        });
    });
</script>
